From 0ec73bda21175fb59a676ef2272e103cfdf3a362 Mon Sep 17 00:00:00 2001
From: Sudara <sudara@alonetone.com>
Date: Mon, 1 Jul 2024 19:04:54 +0200
Subject: [PATCH 1/2] computeAllFilterCoefficients should call
 initAllConvolvers

---
 Source/PluginProcessor.cpp | 6 +-----
 1 file changed, 1 insertion(+), 5 deletions(-)

diff --git a/Source/PluginProcessor.cpp b/Source/PluginProcessor.cpp
index 2b3674d..1fc6ea4 100644
--- a/Source/PluginProcessor.cpp
+++ b/Source/PluginProcessor.cpp
@@ -591,7 +591,6 @@ void PolarDesignerAudioProcessor::prepareToPlay(double sampleRate, int samplesPe
     omniEightBuffer.clear();
 
     computeAllFilterCoefficients();
-    initAllConvolvers();
     for (auto &conv: convolvers) {
         conv.reset();
     }
@@ -870,7 +869,6 @@ void PolarDesignerAudioProcessor::setStateInformation(const void *data, int size
     omniEightBuffer.clear();
 
     computeAllFilterCoefficients();
-    initAllConvolvers();
     repaintDEQ = true;
 }
 
@@ -893,7 +891,6 @@ void PolarDesignerAudioProcessor::parameterChanged(const String &parameterID, fl
         resetXoverFreqs();
         activeBandsChanged = true;
         computeAllFilterCoefficients();
-        initAllConvolvers();
     } else if (parameterID == "proximity") {
         setProxCompCoefficients(proxDistance->load());
     } else if (parameterID == "zeroDelayMode") {
@@ -909,7 +906,6 @@ void PolarDesignerAudioProcessor::parameterChanged(const String &parameterID, fl
             }
             zeroDelayModeChanged = true;
             computeAllFilterCoefficients();
-            initAllConvolvers();
         } else {
             if (abLayerState == 0 && !abLayerChanged.get()) {
                 oldProxDistanceB = proxDistance->load();
@@ -1042,6 +1038,7 @@ void PolarDesignerAudioProcessor::computeAllFilterCoefficients() {
     for (int i = 0; i < 4; ++i) {
         computeFilterCoefficients(i);
     }
+    initAllConvolvers();
 }
 
 void PolarDesignerAudioProcessor::computeFilterCoefficients(int crossoverNr) {
@@ -1281,7 +1278,6 @@ Result PolarDesignerAudioProcessor::loadPreset(const File &presetFile) {
     nBands = static_cast<int> (nBandsPtr->load()) + 1;
     activeBandsChanged = true;
     computeAllFilterCoefficients();
-    initAllConvolvers();
     repaintDEQ = true;
 
     return Result::ok();
-- 
2.38.1

